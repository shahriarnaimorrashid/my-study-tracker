<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STUDY TRACKER | Shahriar Naim</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Poppins:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.92);
            --primary: #6366f1;
            --success: #10b981;
        }

        body { 
            margin: 0; padding: 15px;
            font-family: 'Hind Siliguri', sans-serif;
            min-height: 100vh;
            display: flex; justify-content: center;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab, #ffbe0b, #fb5607);
            background-size: 400% 400%;
            animation: rainbow 15s ease infinite;
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container { 
            width: 100%; max-width: 1100px;
            background: var(--glass); backdrop-filter: blur(10px);
            padding: 25px; border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            margin: auto;
        }

        header { text-align: center; margin-bottom: 25px; }
        .main-title { 
            font-family: 'Poppins', sans-serif; font-size: 35px; color: #1e1b4b; 
            margin: 0; letter-spacing: 2px; text-transform: uppercase;
        }
        .author { font-family: 'Poppins', sans-serif; font-weight: 600; color: #4338ca; font-size: 16px; margin-top: 5px; }

        #motivation-box {
            background: #1e1b4b; color: white; padding: 15px; border-radius: 15px;
            margin: 20px 0; text-align: center; font-size: 18px; font-weight: 600;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            min-height: 25px;
        }

        .input-card { 
            background: #f8fafc; padding: 20px; border-radius: 20px; 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;
            margin-bottom: 25px; border: 1px solid #e2e8f0;
        }

        .input-group label { display: block; margin-bottom: 8px; font-weight: 700; color: #334155; }
        input, select { 
            width: 100%; padding: 12px; border: 2px solid #cbd5e1; border-radius: 12px; 
            font-size: 16px; font-family: 'Hind Siliguri', sans-serif; box-sizing: border-box;
        }

        button { 
            background: #6366f1; color: white; border: none; padding: 12px 25px; 
            border-radius: 12px; font-weight: 700; cursor: pointer; transition: 0.3s; width: 100%;
        }
        button:hover { transform: scale(1.02); background: #4f46e5; }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 15px; margin-bottom: 25px; }
        .stat-box { background: white; padding: 15px; border-radius: 18px; text-align: center; border: 1px solid #f1f5f9; }
        .stat-box h3 { margin: 0; font-size: 13px; color: #64748b; font-weight: 600; }
        .stat-box p { font-size: 22px; font-weight: 700; margin: 8px 0 0; color: #1e1b4b; }
        .yesterday-highlight { border: 2px solid #ec4899; }

        .charts-section { display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; }
        .chart-container { background: white; padding: 25px; border-radius: 20px; min-height: 400px; border: 1px solid #f1f5f9; }

        @media (max-width: 900px) {
            .charts-section { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1 class="main-title">STUDY TRACKER</h1>
        <div class="author">Made by Shahriar Naim or Rashid</div>
        
        <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <select id="monthSelect" onchange="switchMonth()" style="width: auto;">
                <option value="January">জানুয়ারি</option>
                <option value="February">ফেব্রুয়ারি</option>
                <option value="March">মার্চ</option>
                <option value="April">এপ্রিল</option>
                <option value="May">মে</option>
                <option value="June">জুন</option>
                <option value="July">জুলাই</option>
                <option value="August">আগস্ট</option>
                <option value="September">সেপ্টেম্বর</option>
                <option value="October">অক্টোবর</option>
                <option value="November">নভেম্বর</option>
                <option value="December">ডিসেম্বর</option>
            </select>
            <select id="dateSelect" onchange="switchDate()" style="width: auto;">
                </select>
        </div>
    </header>

    <div id="motivation-box"></div>

    <div class="input-card">
        <div class="input-group">
            <label>ডেইলি টার্গেট (সর্বোচ্চ ২৪ঘণ্টা):</label>
            <input type="number" id="dailyTarget" placeholder="১০" onchange="saveTarget()" max="24">
        </div>
        <div class="input-group">
            <label id="inputLabel">আজকের পড়ার সময় (সর্বোচ্চ ২৪ঘণ্টা):</label>
            <div style="display:flex; gap:10px;">
                <input type="number" id="hoursRead" placeholder="ঘণ্টা" max="24">
                <button id="lockBtn" onclick="lockData()">জমা দিন</button>
            </div>
            <small id="lockMsg" style="color:var(--success); display:none; font-weight:bold; margin-top:5px;">✅ ডাটা আপডেট করা হয়েছে!</small>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-box yesterday-highlight"><h3>গতকালের পড়া</h3><p id="yesterdayStat">০ ঘণ্টা</p></div>
        <div class="stat-box"><h3>নির্বাচিত দিনের পড়া</h3><p id="todayStat">০ ঘণ্টা</p></div>
        <div class="stat-box"><h3>দৈনিক গড়</h3><p id="avgStat">০ ঘণ্টা</p></div>
        <div class="stat-box"><h3>মাসিক মোট</h3><p id="monthStat">০ ঘণ্টা</p></div>
        <div class="stat-box"><h3>বাৎসরিক সম্ভাব্য</h3><p id="yearStat">০ ঘণ্টা</p></div>
    </div>

    <div class="charts-section">
        <div class="chart-container"><canvas id="monthlyChart"></canvas></div>
        <div class="chart-container"><canvas id="progressChart"></canvas></div>
    </div>
</div>

<script>
    const quotes = ["সাফল্য মানে প্রতিদিনের ছোট ছোট চেষ্টা!", "কঠোর পরিশ্রমই সাফল্যের চাবিকাঠি!", "আজকের কষ্ট আগামীর উজ্জ্বল ভবিষ্যৎ!", "আপনার লক্ষ্য বড় রাখুন!", "পড়ালেখা জীবন গড়ার হাতিয়ার!"];
    const animations = ["animate__bounceIn", "animate__fadeInDown", "animate__flipInX", "animate__zoomIn", "animate__tada"];

    let currentMonth = localStorage.getItem('activeMonth') || 'January';
    let selectedDay = new Date().getDate();
    
    document.getElementById('monthSelect').value = currentMonth;

    function populateDates() {
        const dateSelect = document.getElementById('dateSelect');
        dateSelect.innerHTML = "";
        for (let i = 1; i <= 31; i++) {
            let opt = document.createElement('option');
            opt.value = i;
            opt.innerHTML = i + " তারিখ";
            if (i === selectedDay) opt.selected = true;
            dateSelect.appendChild(opt);
        }
    }

    let studyData = JSON.parse(localStorage.getItem(`studyData_${currentMonth}`)) || new Array(31).fill(0);
    let target = localStorage.getItem(`target_${currentMonth}`) || 0;

    function init() {
        populateDates();
        document.getElementById('dailyTarget').value = target;
        updateMotivation();
        updateStats();
        renderCharts();
        checkSelection();
    }

    function switchMonth() {
        currentMonth = document.getElementById('monthSelect').value;
        localStorage.setItem('activeMonth', currentMonth);
        studyData = JSON.parse(localStorage.getItem(`studyData_${currentMonth}`)) || new Array(31).fill(0);
        target = localStorage.getItem(`target_${currentMonth}`) || 0;
        init();
    }

    function switchDate() {
        selectedDay = parseInt(document.getElementById('dateSelect').value);
        checkSelection();
        updateStats();
        renderCharts();
    }

    function checkSelection() {
        const isToday = (selectedDay === new Date().getDate());
        document.getElementById('inputLabel').innerText = isToday ? "আজকের পড়ার সময় (ঘণ্টা):" : selectedDay + " তারিখের পড়ার সময়:";
        document.getElementById('hoursRead').value = studyData[selectedDay - 1] || "";
        document.getElementById('lockMsg').style.display = 'none';
    }

    function updateMotivation() {
        const box = document.getElementById('motivation-box');
        box.innerText = quotes[Math.floor(Math.random() * quotes.length)];
        box.className = "animate__animated " + animations[Math.floor(Math.random() * animations.length)];
    }

    function saveTarget() {
        let val = parseFloat(document.getElementById('dailyTarget').value);
        if (val > 24) val = 24;
        target = val || 0;
        localStorage.setItem(`target_${currentMonth}`, target);
        renderCharts();
    }

    function lockData() {
        let hours = parseFloat(document.getElementById('hoursRead').value);
        if (isNaN(hours) || hours < 0 || hours > 24) return alert("সঠিক ঘণ্টা দিন (০-২৪)!");
        
        studyData[selectedDay - 1] = hours;
        localStorage.setItem(`studyData_${currentMonth}`, JSON.stringify(studyData));
        document.getElementById('lockMsg').style.display = 'block';
        updateStats();
        renderCharts();
    }

    function updateStats() {
        const total = studyData.reduce((a, b) => a + b, 0);
        const activeDays = studyData.filter(x => x > 0).length || 1;
        const realToday = new Date().getDate();
        
        // গতকালকের ডাটা বের করা
        let yesterdayVal = 0;
        if (realToday > 1) {
            yesterdayVal = studyData[realToday - 2];
        }

        document.getElementById('yesterdayStat').innerText = yesterdayVal + " ঘণ্টা";
        document.getElementById('todayStat').innerText = (studyData[selectedDay-1] || 0) + " ঘণ্টা";
        document.getElementById('avgStat').innerText = (total / activeDays).toFixed(1) + " ঘণ্টা";
        document.getElementById('monthStat').innerText = total + " ঘণ্টা";
        document.getElementById('yearStat').innerText = (total * 12) + " ঘণ্টা";
    }

    function renderCharts() {
        const ctx1 = document.getElementById('monthlyChart');
        if(window.mChart) window.mChart.destroy();
        window.mChart = new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: Array.from({length: 31}, (_, i) => i + 1),
                datasets: [{ label: 'পড়ার ঘণ্টা', data: studyData, backgroundColor: '#6366f1', borderRadius: 5 }]
            },
            options: { 
                responsive: true, maintainAspectRatio: false,
                scales: { 
                    x: { title: { display: true, text: 'Days' }, ticks: { maxRotation: 0 } },
                    y: { title: { display: true, text: 'Hours' }, beginAtZero: true, max: 24, ticks: { stepSize: 2 } } 
                }
            }
        });

        const ctx2 = document.getElementById('progressChart');
        if(window.pChart) window.pChart.destroy();
        const done = studyData[selectedDay-1] || 0;
        window.pChart = new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: ['সম্পূর্ণ', 'বাকি'],
                datasets: [{ data: [done, Math.max(0, target-done)], backgroundColor: ['#10b981', '#e2e8f0'] }]
            },
            options: { cutout: '75%', maintainAspectRatio: false }
        });
    }

    init();
</script>
</body>
</html>