<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STUDY TRACKER | Shahriar Naim</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Poppins:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.92);
            --primary: #6366f1;
            --success: #10b981;
            --danger: #ef4444;
        }

        body { 
            margin: 0; padding: 15px;
            font-family: 'Hind Siliguri', sans-serif;
            min-height: 100vh;
            display: flex; justify-content: center;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab, #ffbe0b, #fb5607);
            background-size: 400% 400%;
            animation: rainbow 15s ease infinite;
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container { 
            width: 100%; max-width: 1100px;
            background: var(--glass); backdrop-filter: blur(10px);
            padding: 25px; border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            margin: auto;
        }

        header { text-align: center; margin-bottom: 20px; }
        .main-title { 
            font-family: 'Poppins', sans-serif; font-size: clamp(24px, 5vw, 35px); color: #1e1b4b; 
            margin: 0; letter-spacing: 2px; text-transform: uppercase;
        }
        .author { font-family: 'Poppins', sans-serif; font-weight: 600; color: #4338ca; font-size: 16px; margin-top: 5px; }

        #motivation-box {
            background: #1e1b4b; color: white; padding: 15px; border-radius: 15px;
            margin: 20px 0; text-align: center; font-size: 18px; font-weight: 600;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .input-card { 
            background: #f8fafc; padding: 20px; border-radius: 20px; 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;
            margin-bottom: 25px; border: 1px solid #e2e8f0;
        }

        .input-group label { display: block; margin-bottom: 8px; font-weight: 700; color: #334155; }
        input, select { 
            width: 100%; padding: 12px; border: 2px solid #cbd5e1; border-radius: 12px; 
            font-size: 16px; font-family: 'Hind Siliguri', sans-serif; box-sizing: border-box;
        }

        .btn { 
            color: white; border: none; padding: 12px 20px; 
            border-radius: 12px; font-weight: 700; cursor: pointer; transition: 0.3s; 
            font-family: 'Hind Siliguri', sans-serif;
        }
        .btn-primary { background: #6366f1; width: 100%; }
        .btn-backup { background: #0f172a; font-size: 14px; margin: 5px; }
        .btn:hover { opacity: 0.85; transform: translateY(-2px); }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 15px; margin-bottom: 25px; }
        .stat-box { background: white; padding: 15px; border-radius: 18px; text-align: center; border: 1px solid #f1f5f9; }
        .stat-box h3 { margin: 0; font-size: 13px; color: #64748b; font-weight: 600; }
        .stat-box p { font-size: 22px; font-weight: 700; margin: 8px 0 0; color: #1e1b4b; }
        .yesterday-highlight { border: 2px solid #ec4899; }

        .charts-section { display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; }
        .chart-container { background: white; padding: 25px; border-radius: 20px; min-height: 400px; border: 1px solid #f1f5f9; }

        .backup-controls { text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px dashed #cbd5e1; }

        @media (max-width: 900px) { .charts-section { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1 class="main-title">STUDY TRACKER</h1>
        <div class="author">Made by Shahriar Naim Or Rashid</div>
        
        <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <select id="monthSelect" onchange="switchMonth()" style="width: auto;">
                <option value="January">‡¶ú‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø</option><option value="February">‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø</option>
                <option value="March">‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö</option><option value="April">‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤</option>
                <option value="May">‡¶Æ‡ßá</option><option value="June">‡¶ú‡ßÅ‡¶®</option>
                <option value="July">‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á</option><option value="August">‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü</option>
                <option value="September">‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞</option><option value="October">‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞</option>
                <option value="November">‡¶®‡¶≠‡ßá‡¶Æ‡ßç‡¶¨‡¶∞</option><option value="December">‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞</option>
            </select>
            <select id="dateSelect" onchange="switchDate()" style="width: auto;"></select>
        </div>
    </header>

    <div id="motivation-box"></div>

    <div class="input-card">
        <div class="input-group">
            <label>‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü (‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß®‡ß™‡¶ò‡¶£‡ßç‡¶ü‡¶æ):</label>
            <input type="number" id="dailyTarget" placeholder="‡ßß‡ß¶" onchange="saveTarget()" max="24">
        </div>
        <div class="input-group">
            <label id="inputLabel">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶™‡ßú‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü:</label>
            <div style="display:flex; gap:10px;">
                <input type="number" id="hoursRead" placeholder="‡¶ò‡¶£‡ßç‡¶ü‡¶æ" max="24">
                <button class="btn btn-primary" onclick="lockData()">‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
            </div>
            <small id="lockMsg" style="color:var(--success); display:none; font-weight:bold; margin-top:5px;">‚úÖ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡ßü‡ßá‡¶õ‡ßá!</small>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-box yesterday-highlight"><h3>‡¶ó‡¶§‡¶ï‡¶æ‡¶≤‡ßá‡¶∞ ‡¶™‡ßú‡¶æ</h3><p id="yesterdayStat">‡ß¶ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ</p></div>
        <div class="stat-box"><h3>‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡ßú‡¶æ</h3><p id="todayStat">‡ß¶ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ</p></div>
        <div class="stat-box"><h3>‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶ó‡ßú</h3><p id="avgStat">‡ß¶ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ</p></div>
        <div class="stat-box"><h3>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶Æ‡ßã‡¶ü</h3><p id="monthStat">‡ß¶ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ</p></div>
        <div class="stat-box"><h3>‡¶¨‡¶æ‡ßé‡¶∏‡¶∞‡¶ø‡¶ï ‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡ßç‡¶Ø</h3><p id="yearStat">‡ß¶ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ</p></div>
    </div>

    <div class="charts-section">
        <div class="chart-container"><canvas id="monthlyChart"></canvas></div>
        <div class="chart-container"><canvas id="progressChart"></canvas></div>
    </div>

    <div class="backup-controls">
        <button class="btn btn-backup" onclick="exportData()">üì• ‡¶°‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ (Export)</button>
        <button class="btn btn-backup" onclick="document.getElementById('importFile').click()">üì§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° (Import)</button>
        <input type="file" id="importFile" style="display:none" onchange="importData(event)">
        <p style="font-size: 12px; color: #64748b;">*‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶á ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡ßá‡•§</p>
    </div>
</div>

<script>
    const quotes = ["‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶õ‡ßã‡¶ü ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ!", "‡¶™‡¶∞‡¶ø‡¶∂‡ßç‡¶∞‡¶Æ‡¶á ‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ö‡¶æ‡¶¨‡¶ø‡¶ï‡¶æ‡¶†‡¶ø!", "‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶∏‡ßç‡¶•‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®!", "‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶∂‡ßç‡¶∞‡¶Æ‡¶á ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø!"];
    const animations = ["animate__bounceIn", "animate__fadeInDown", "animate__zoomIn", "animate__tada"];

    let currentMonth = localStorage.getItem('activeMonth') || 'January';
    let selectedDay = new Date().getDate();
    document.getElementById('monthSelect').value = currentMonth;

    let studyData = JSON.parse(localStorage.getItem(`studyData_${currentMonth}`)) || new Array(31).fill(0);
    let target = localStorage.getItem(`target_${currentMonth}`) || 0;

    function init() {
        populateDates();
        document.getElementById('dailyTarget').value = target;
        updateMotivation();
        updateStats();
        renderCharts();
        checkSelection();
    }

    function populateDates() {
        const dateSelect = document.getElementById('dateSelect');
        dateSelect.innerHTML = "";
        for (let i = 1; i <= 31; i++) {
            let opt = document.createElement('option');
            opt.value = i; opt.innerHTML = i + " ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ";
            if (i === selectedDay) opt.selected = true;
            dateSelect.appendChild(opt);
        }
    }

    function switchMonth() {
        currentMonth = document.getElementById('monthSelect').value;
        localStorage.setItem('activeMonth', currentMonth);
        studyData = JSON.parse(localStorage.getItem(`studyData_${currentMonth}`)) || new Array(31).fill(0);
        target = localStorage.getItem(`target_${currentMonth}`) || 0;
        init();
    }

    function switchDate() {
        selectedDay = parseInt(document.getElementById('dateSelect').value);
        checkSelection(); updateStats(); renderCharts();
    }

    function checkSelection() {
        document.getElementById('inputLabel').innerText = (selectedDay === new Date().getDate()) ? "‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶™‡ßú‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü:" : selectedDay + " ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶™‡ßú‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü:";
        document.getElementById('hoursRead').value = studyData[selectedDay - 1] || "";
        document.getElementById('lockMsg').style.display = 'none';
    }

    function updateMotivation() {
        const box = document.getElementById('motivation-box');
        box.innerText = quotes[Math.floor(Math.random() * quotes.length)];
        box.className = "animate__animated " + animations[Math.floor(Math.random() * animations.length)];
    }

    function saveTarget() {
        let val = parseFloat(document.getElementById('dailyTarget').value);
        target = (val > 24) ? 24 : (val || 0);
        localStorage.setItem(`target_${currentMonth}`, target);
        renderCharts();
    }

    function lockData() {
        let hours = parseFloat(document.getElementById('hoursRead').value);
        if (isNaN(hours) || hours < 0 || hours > 24) return alert("‡ß¶-‡ß®‡ß™ ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶¶‡¶ø‡¶®!");
        studyData[selectedDay - 1] = hours;
        localStorage.setItem(`studyData_${currentMonth}`, JSON.stringify(studyData));
        document.getElementById('lockMsg').style.display = 'block';
        updateStats(); renderCharts();
    }

    function updateStats() {
        const total = studyData.reduce((a, b) => a + b, 0);
        const activeDays = studyData.filter(x => x > 0).length || 1;
        const realToday = new Date().getDate();
        document.getElementById('yesterdayStat').innerText = (realToday > 1 ? studyData[realToday - 2] : 0) + " ‡¶ò‡¶£‡ßç‡¶ü‡¶æ";
        document.getElementById('todayStat').innerText = (studyData[selectedDay-1] || 0) + " ‡¶ò‡¶£‡ßç‡¶ü‡¶æ";
        document.getElementById('avgStat').innerText = (total / activeDays).toFixed(1) + " ‡¶ò‡¶£‡ßç‡¶ü‡¶æ";
        document.getElementById('monthStat').innerText = total + " ‡¶ò‡¶£‡ßç‡¶ü‡¶æ";
        document.getElementById('yearStat').innerText = (total * 12) + " ‡¶ò‡¶£‡ßç‡¶ü‡¶æ";
    }

    function renderCharts() {
        const ctx1 = document.getElementById('monthlyChart');
        if(window.mChart) window.mChart.destroy();
        window.mChart = new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: Array.from({length: 31}, (_, i) => i + 1),
                datasets: [{ label: '‡¶™‡ßú‡¶æ‡¶∞ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ', data: studyData, backgroundColor: '#6366f1', borderRadius: 5 }]
            },
            options: { 
                responsive: true, maintainAspectRatio: false,
                scales: { 
                    x: { title: { display: true, text: 'Days' }, ticks: { maxRotation: 0 } },
                    y: { title: { display: true, text: 'Hours' }, beginAtZero: true, max: 24, ticks: { stepSize: 2 } } 
                }
            }
        });

        const ctx2 = document.getElementById('progressChart');
        if(window.pChart) window.pChart.destroy();
        const done = studyData[selectedDay-1] || 0;
        window.pChart = new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: ['‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£', '‡¶¨‡¶æ‡¶ï‡¶ø'],
                datasets: [{ data: [done, Math.max(0, target-done)], backgroundColor: ['#10b981', '#e2e8f0'] }]
            },
            options: { cutout: '75%', maintainAspectRatio: false }
        });
    }

    // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function exportData() {
        const allData = {};
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            allData[key] = localStorage.getItem(key);
        }
        const blob = new Blob([JSON.stringify(allData)], {type: "application/json"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `StudyTracker_Backup_${new Date().toLocaleDateString()}.json`;
        a.click();
    }

    function importData(event) {
        const file = event.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const importedData = JSON.parse(e.target.result);
                Object.keys(importedData).forEach(key => {
                    localStorage.setItem(key, importedData[key]);
                });
                alert("‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶™‡ßá‡¶ú‡¶ü‡¶ø ‡¶∞‡¶ø‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá‡•§");
                location.reload();
            } catch (err) { alert("‡¶≠‡ßÅ‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!"); }
        };
        reader.readAsText(file);
    }

    init();
</script>
</body>
</html>
